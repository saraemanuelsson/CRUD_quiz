# CRUD Quiz

Use the solution to this afternoon's Property Tracker lab to answer the following questions. Please write your answers under each question, push the file to GitHub, and submit in the usual way.

## MVP Questions

In our Property Tracker application:

Q1. Where are we instantiating instances of the `Property` class?

console.rb, line 6, 15 and 24 (= Property.new....)

Q2. Where are we defining the SQL that enables us to save the ruby `Property` object into the database?

property.rb, line 18 - 29

Q3. In `console.rb`, which lines modify the database?

4, 13, 22, 31, 33, 

Q4. Why do we not define the id of a `Property` object at the point we instantiate it (‘new it up’)?

We let the database create one for us when we call .save on the Property object, it will create a unique id because of the SERIAL PRIMARY KEY in the table structure.

Q5. Where and how do we assign the id (that is generated by the database) to the ruby `Property` object?

Line 32, @id = ... . When a row is created in the table it gets generated an id. On line 32 we get the id value from the table and assign it to the instance variable @id.

Q6. Why do we put a guard (an `if` clause) on the `@id` attribute in the constructor?

Without the guard we'd get an error when we try to initialize an object since we're not giving it a value for the key @id. By adding the guard we only assign a value to @id if there is an id and there will be an id once we've saved the instance to the database.

Q7. Why are some of the CRUD actions represented by instance methods, and others by class methods?

It depends on if you want to do something to/with a specific object (instance) or if you want to do something to/with the entire table (class). You need an instance to use an instance method but you don't need a specific instance to use a class method.

Q8. What type of data structure is returned by calls to `db.exec_prepared()`? In the `save` method, how do we access the id from the returned data structure?

An array-like thingy with hashes inside (one hash per row from the database).
Calling the save method on a property object returns an array like thing of [{id: 1}, {address: street}, {value: 1234}, {bedrooms: 71}, {build: mansion}], we then get to the id by using [0] => {id: 1}, ['id'] => '1', and .to_i => 1

Q9. Why do we use prepared statements when performing database operations?

To protect ourselves from SQL injections. By limiting the number of values that can be inserted the bad guys can't latch an SQL query onto the inputted value.

## Extension Questions

Look at the `find_by_id` and `find_by_address` methods in the `Property` class.

Q10. What do they take in as their arguments?

The id and the address respectively.

Q11. What are their return values?

If there's a match they will return an instance of the class, otherwise nil.